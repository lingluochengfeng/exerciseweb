# 本部分概览，项目中模块的划分和整合
# 分模块、分工程管理
## 根据实际需要，补充部分Maven的实用知识
>一：分模块、分工程管理  
>二：多模块，多Web应用，合并成一个War包

创建一个maven的quickstart项目，取名为exerciseweb，分别创建出来五个模块（有的是quickstart（common、goods），有的是web工程（customermgr、goodsweb）），创建模块的时候，父工程为exerciseweb，其中usstweb为最终合并的工程。
## 分模块、分工程管理-1（usstweb是总工程）
1：在总的web（usstweb）的pom里面，加入要合并的war的内容，这里将customermgr模块和goodsweb模块加入到usstweb总模块下，示例如下：

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.4</version>
                    <configuration>
                        <overlays>
                            <overlay>
                                <groupId>com.usst</groupId>
                                <artifactId>customermgr</artifactId>
                            </overlay>
                            <overlay>
                                <groupId>com.usst</groupId>
                                <artifactId>goodsweb</artifactId>
                            </overlay>

                        </overlays>
                    </configuration>
                </plugin>


## 分模块、分工程管理-2（usstweb是总工程）
2:在总的web的pom中，加入要合并的war的依赖，这里注意type的值是wan，示例如下： 
 
	    <dependencies>
	        <dependency>
	            <groupId>com.usst</groupId>
	            <artifactId>customermgr</artifactId>
	            <version>1.0-SNAPSHOT</version>
	            <type>war</type>
	        </dependency>
	        <dependency>
	            <groupId>com.usst</groupId>
	            <artifactId>goodsweb</artifactId>
	            <version>1.0-SNAPSHOT</version>
	            <type>war</type>
	        </dependency>
		</dependencies>
# 第03节：多模块多Web应用合并War包
## 测试将不同的模块整合
1. 在common的模块下创建一个Base1的类，里面提供一个base1（String s）的方法，用于将来测试将不同的模块整合到一个模块;  
2. 同理，在customermgr的模块下创建一个CUstomer1的类，里面包含一个base方法。如果这个模块想调用common中的内容，需要在customer模块的pom文件中添加对common模块的依赖。如下代码所示：

```
        <!--在customermgr的pom文件中添加依赖，这个依赖是依赖common中的内容-->
        <dependency>
            <groupId>com.usst</groupId>
            <artifactId>commom</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
```

web模块下也可以添加一些自己的内容，比如js，图片，jsp等等。  
3. 在goods的模块下做类似于common模块的操作，在goodsweb的模块下做类似于customermgr模块的操作  
4. 在项目工程下执行maven-》install进行打包  
5. 查看最后生成的war包，就是最后合并的内容  
<font color="red">注意：如果多个war包有同路径且同名的文件，如果总的Web(usstweb)里面有，则会覆盖分支的；如果总的(usstweb)没有，则看合并顺序，留下第一个war包中的文件。（usstweb下的pom文件中的overlay属性）</font>

```
<configuration>  
    <overlays>  
        <overlay>
            <groupId>com.usst</groupId>
            <artifactId>customermgr</artifactId>
        </overlay>
        <overlay>
            <groupId>com.usst</groupId>
            <artifactId>goodsweb</artifactId>
        </overlay>
    </overlays>
</configuration>
```
以上是usstweb下的pom文件的顺序。  

6.如果想要让项目的每个模块都能运行起来，需要在每个要测试的web的pom里面，加入jetty的插件配置，相比于tomcat，jetty更加轻量级，这里我们只在web模块下增加了jetty配置，
contextPath是访问的url，示例如下：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.14.v20131031</version>
    <configuration>
        <scanIntervalSeconds>10</scanIntervalSeconds>
        <stopPort>9999</stopPort>
        <webAppConfig>
            <contextPath>/</contextPath>
        </webAppConfig>
        <connectors>
            <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <port>9080</port>
                <maxIdleTime>60000</maxIdleTime>
            </connector>
        </connectors>
    </configuration>
</plugin>
```

7.在maven projects的视图中，点击“Execute Maven Goal”，输入：jetty:run，运行每一个模块。输入路径，观察与我们要的结果是否一致。  
<font color="red">注意：有的时候更改了.java文件无法立即识别，需要通过maven工程的clean、build、install一遍再重新使用jetty运行，一般可以解决问题</font>